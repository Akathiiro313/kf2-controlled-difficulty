[h1]Summary[/h1]

[b]Last tested on[/b]: KF2 EA version 1043 / Oct 28 2016
[b]Mod version[/b]: 283bbd68 (built 2016-10-28)

This open source mod creates a custom game mode called ControlledDifficulty.CD_Survival, which supports the following:

* Disabling the game conductor's variation of the zed spawn intensity and move speed
* 'Faking' players; this increases the zed count (but not zed health) as though additional players were present
* Setting an arbitrary, fixed spawn intensity, without conductor interference
* Setting the max amount live zeds
* Setting a SpawnCycle, which controls exactly which zeds spawn and in what order
* Setting trader time
* Disabling albino crawlers (i.e. gas crawlers) and albino alphas
* Controlling which boss spawns

Source: https://github.com/notblackout/kf2-controlled-difficulty

This mod is intended to support solo faked-player HOE challenges.

In the vanilla game, the Game Conductor controls spawn intensity. This is expressed as a floating point number, where smaller numbers result in more frequent zed spawns and larger numbers result in less frequent zed spawns.

The vanilla GC varies the spawn intensity value based on some crude heuristics about how well the player is supposedly doing.  In this mod, you set a specific intensity value before starting the game.  It does not change during play.  Supported values from 0 to 1, inclusive, are supported (since version e048b0e, built 2016-09-15), where smaller numbers are more intense, i.e. more frequent spawns.  For reference, the standard game conductor varies this number between 1.0 (easiest) and 0.75 (hardest) on HOE.

[h1]Installation[/h1]

Click subscribe.  Restart the game if it is running (to make the game sync workshop items).  That's it.  You don't have to edit any files or manually download anything.

To play, paste one of the console commands listed in the next section.  You can run those commands from KF2's main menu.

This mod only activates when you run an 'open' console command and specify the '?game=ControlledDifficulty.CD_Survival' parameter as shown in the next section.  Mulitplayer games and solo games started through the GUI are not affected by this mod.

[h1]Console Command Examples (Start Here)[/h1]

The easiest way to get started is to open the KF2 console at the main menu (using the ` or ~ key on US keyboards) and to paste one of the following commands.  Change the map name as desired.

// One faked player (assuming solo play, that makes two total), 30 second trader time,
// HOE difficulty, Long duration game, SpawnMod 0.85, MaxMonsters is 32, no gas.
// SpawnMod is the 'spawn intensity' described in preceding sections.
// Map is KF-Hillside-B4.  Must be typed/pasted as one line.
[code]open KF-Hillside-B4?game=ControlledDifficulty.CD_Survival?Difficulty=3?GameLength=2?TraderTime=30?FakePlayers=1?MaxMonsters=32?SpawnMod=0.85?AlbinoCrawlers=false[/code]

// Five faked players, SpawnMod 0.75, MaxMonsters 24, TraderTime 45.
// Length/Diff same as above.  Map is Burning Paris.
[code]open KF-BurningParis?game=ControlledDifficulty.CD_Survival?Difficulty=3?GameLength=2?FakePlayers=5?SpawnMod=0.75?MaxMonsters=24?TraderTime=45[/code]

GameLength values:
* 0 = Short
* 1 = Medium
* 2 = Long

Difficulty values:
* 0 = Normal
* 1 = Hard
* 2 = Suicidal
* 3 = HOE

TraderTime values:
* any value in seconds
* 0 means use the default (0 does not disable trader time)

FakePlayers values:
* 0 to 5, inclusive

SpawnMod values: 
* Multiplies the time spent waiting between zed spawns
* Smaller values are harder (less time between spawns)
* Bigger values are easier (more time between spawns)
* Recommended value range: (HOE GC's hardest setting) 0.75 ... 1.0 (HOE GC's easiest setting)
* Technical minimum: 0 (spawns one squad each second, extremely difficult)
* Technical maximum: 1

MaxMonsters values:
* any positive value is taken literally
* 0 or negative means use the unmodded game's default
* note: standard KF2 solo uses 16, standard KF2 multiplayer server uses 32

AlbinoCrawlers values:
* false forces all crawlers to be ordinary crawlers
* true allows albino crawlers to sometimes spawn just like in standard KF2

AlbinoAlphas values:
* false forces all alpha clots to be ordinary alphas
* true allows albino alpha clots to sometimes spawn just like in standard KF2

Boss values:
* hans or volter: forces Hans Volter to spawn on the boss wave
* patriarch or patty: forces the Patriarch to spawn on the boss wave
* unmodded: random boss is selected on boss wave just like in standard KF2

SpawnCycle values:
* Try `CDSpawnPresets` to see valid options
* For full docs on this option, see https://github.com/notblackout/kf2-controlled-difficulty/blob/master/spawn.md

Parameters are order-insensitive.

[h1]KFGame.ini Section: [ControlledDifficulty.CD_Survival][/h1]

CD does not require .ini edits to get started.  You can paste one of the console commands listed in the preceding section if you just want to play.

Whenever you run the mod, it writes its settings to KFGame.ini under the [ControlledDifficulty.CD_Survival] section, if KFGame.ini is not readonly.  This KFGame.ini section merely remembers the last options explicitly specified in the console, so that you don't have to repeatedly type parameters that you never change.  You don't have to edit it directly, though you can.

For instance, if you run

[b]open KF-Hillside-B3?game=ControlledDifficulty.CD_Survival?FakePlayers=5[/b]

then FakePlayers=5 will be written to CD's section in KFGame.ini.

If you subsequently run

[b]open KF-Hillside-B3?game=ControlledDifficulty.CD_Survival[/b]

then CD will read the saved FakePlayers=5 value from KFGame.ini and apply it automatically.  Likewise for the other CD options.

KFGame.ini is usually in [b]<your homedir>\Documents\My Games\KillingFloor2\KFGame\Config[/b].

When the KFGame.ini section is missing or incomplete, CD assumes:

* no faked players
* standard trader time for the difficulty level
* standard MaxMonsters (generally 16 in standalone/solo, compared to 32 on multiplayer servers)
* SpawnMod = 1.0

[h1]Logging[/h1]

Configure Controlled Difficulty's logging output by either:

* Setting bLogControlledDifficulty=<true|false> in KFGame.ini's [ControlledDifficulty.CD_Survival] KFGame.ini section
* Running logControlledDifficulty <true|false> in the console

To see this logging output in realtime, add '-log' to KF2's launch options. This makes KF2 open two windows instead of one: one white-on-black text terminal for logging output, one for the regular game.

Optionally, consider also enabling AISpawnManager logging of zed/squad spawns.  Enable it by adding this to your KFGame.ini:

[KFGame.KFAISpawnManager]
bLogAISpawning=true

[h1]How does CD relate to Skell's Faked Suite and Project One mods?[/h1]

I made this mod after P1 went unmaintained, but before Skell returned to make FS.  FS has much stronger support for running on a multiplayer server than CD, support for ! chat commands, and the ability to extend trader time or disable zed block/dodge.  CD, on the other hand, has its unique SpawnCycle feature, which is not present in FS or anything else besides CD right now.

[h1]Where can I get KF-Hillside?[/h1]

http://forums.tripwireinteractive.com/forum/killing-floor-2/killing-floor-2-modifications/level-design-ac/beta-map-releases-aa/114043-kf-hillside

CD works with any map, not just Hillside.  But Hillside is good for a lot of solo challenges.

[h1]Changelog[/h1]

Changelog: https://github.com/notblackout/kf2-controlled-difficulty/blob/master/changelog.txt

[h1]Special Thanks[/h1]

Thanks to the following people for variously testing the mod, helping find bugs, or sharing their insight (this does not imply that they endorse the mod):

dandyboy66, Fat Cat, Kore, mike5879, Trance, Skell

All bugs are still my fault :)
